"use strict";(self.webpackChunkstore_inventory_system=self.webpackChunkstore_inventory_system||[]).push([[220],{4220:(n,e,a)=>{a.r(e),a.d(e,{default:()=>i});var r=a(5043),s=a(152),t=a(52),d=a(579);const i=()=>{const[n,e]=(0,r.useState)(new Date),[a,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,m]=(0,r.useState)({show:!1,day:null});(0,r.useEffect)(()=>{p()},[n]);const p=async()=>{l(!0);try{const e=n.getFullYear(),a=n.getMonth(),r=new Date(e,a,1),d=new Date(e,a+1,0),o=new Date(r);o.setDate(o.getDate()-r.getDay());const l=new Date(d);l.setDate(l.getDate()+(6-d.getDay()));const c=await t.Q.getAllOrders(),m=await s.w.getDepositSchedule(),p=new Map,g=new Date(o);for(;g<=l;){const n=g.toISOString().split("T")[0];p.set(n,{date:n,isCurrentMonth:g.getMonth()===a,isToday:n===(new Date).toISOString().split("T")[0],salesAmount:0,orderCount:0,expectedDeposits:0,depositCount:0,orders:[]}),g.setDate(g.getDate()+1)}c.forEach(n=>{if(n.order_date){const e=n.order_date.split("T")[0],a=p.get(e);a&&(a.salesAmount+=n.total_amount,a.orderCount+=1,a.orders.push(n))}}),m.forEach(n=>{const e=p.get(n.date);e&&(e.expectedDeposits+=n.total_amount,e.depositCount+=n.orders.length)}),i(Array.from(p.values()))}catch(e){console.error("\uce98\ub9b0\ub354 \ub370\uc774\ud130 \ub85c\ub529 \uc2e4\ud328:",e)}finally{l(!1)}},g=n=>0===n?"":new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0}).format(n),h=n=>0===n?"":n>=1e4?"".concat(Math.floor(n/1e4),"\ub9cc\uc6d0"):"".concat(Math.floor(n/1e3),"\ucc9c\uc6d0"),u=a=>{const r=new Date(n);"prev"===a?r.setMonth(r.getMonth()-1):r.setMonth(r.getMonth()+1),e(r)},x=()=>{m({show:!1,day:null})},v=n=>s.w.getPaymentTypeDisplayName(n);return o?(0,d.jsxs)("div",{className:"calendar-loading",children:[(0,d.jsx)("div",{className:"loading-spinner"}),(0,d.jsx)("p",{children:"\uce98\ub9b0\ub354\ub97c \ubd88\ub7ec\uc624\ub294 \uc911..."})]}):(0,d.jsxs)("div",{className:"sales-calendar-page",children:[(0,d.jsxs)("div",{className:"calendar-header",children:[(0,d.jsxs)("div",{className:"header-content",children:[(0,d.jsx)("h1",{children:"\ud83d\udcc5 \ub9e4\ucd9c & \uc785\uae08 \uce98\ub9b0\ub354"}),(0,d.jsx)("p",{children:"\uc77c\uc790\ubcc4 \ub9e4\ucd9c\uacfc \uc785\uae08 \uc608\uc815 \ud604\ud669\uc744 \ud55c\ub208\uc5d0 \ud655\uc778\ud558\uc138\uc694"})]}),(0,d.jsxs)("div",{className:"header-actions",children:[(0,d.jsx)("button",{className:"today-btn",onClick:()=>{e(new Date)},children:"\uc624\ub298"}),(0,d.jsx)("button",{className:"refresh-btn",onClick:p,children:"\ud83d\udd04 \uc0c8\ub85c\uace0\uce68"})]})]}),(0,d.jsxs)("div",{className:"calendar-nav",children:[(0,d.jsx)("button",{className:"nav-btn",onClick:()=>u("prev"),children:"\u25c0 \uc774\uc804"}),(0,d.jsxs)("h2",{className:"current-month",children:[n.getFullYear(),"\ub144 ",n.getMonth()+1,"\uc6d4"]}),(0,d.jsx)("button",{className:"nav-btn",onClick:()=>u("next"),children:"\ub2e4\uc74c \u25b6"})]}),(0,d.jsxs)("div",{className:"calendar-legend",children:[(0,d.jsxs)("div",{className:"legend-item",children:[(0,d.jsx)("div",{className:"legend-color sales"}),(0,d.jsx)("span",{children:"\ub9e4\ucd9c"})]}),(0,d.jsxs)("div",{className:"legend-item",children:[(0,d.jsx)("div",{className:"legend-color deposit"}),(0,d.jsx)("span",{children:"\uc785\uae08 \uc608\uc815"})]}),(0,d.jsx)("div",{className:"legend-note",children:"* \ub0a0\uc9dc\ub97c \ud074\ub9ad\ud558\uba74 \uc0c1\uc138 \ub0b4\uc5ed\uc744 \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4"})]}),(0,d.jsx)("div",{className:"calendar-container",children:(0,d.jsxs)("div",{className:"calendar-grid",children:[["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"].map(n=>(0,d.jsx)("div",{className:"weekday-header",children:n},n)),a.map((n,e)=>(0,d.jsxs)("div",{className:"calendar-day ".concat(n.isCurrentMonth?"":"other-month"," ").concat(n.isToday?"today":""," ").concat(n.salesAmount>0||n.expectedDeposits>0?"has-data":""),onClick:()=>(n=>{n.isCurrentMonth&&(n.salesAmount>0||n.expectedDeposits>0)&&m({show:!0,day:n})})(n),children:[(0,d.jsx)("div",{className:"day-number",children:new Date(n.date).getDate()}),n.isCurrentMonth&&(0,d.jsxs)("div",{className:"day-content",children:[n.salesAmount>0&&(0,d.jsxs)("div",{className:"sales-info",children:[(0,d.jsx)("div",{className:"amount sales",children:h(n.salesAmount)}),(0,d.jsxs)("div",{className:"count",children:[n.orderCount,"\uac74"]})]}),n.expectedDeposits>0&&(0,d.jsxs)("div",{className:"deposit-info",children:[(0,d.jsxs)("div",{className:"amount deposit",children:["\ud83d\udcb0 ",h(n.expectedDeposits)]}),(0,d.jsxs)("div",{className:"count",children:[n.depositCount,"\uac74"]})]})]})]},e))]})}),c.show&&c.day&&(0,d.jsx)("div",{className:"modal-overlay",onClick:x,children:(0,d.jsxs)("div",{className:"modal-content",onClick:n=>n.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsxs)("h3",{children:[new Date(c.day.date).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long"})," \uc0c1\uc138"]}),(0,d.jsx)("button",{className:"close-modal-btn",onClick:x,children:"\u2715"})]}),(0,d.jsxs)("div",{className:"modal-body",children:[(0,d.jsxs)("div",{className:"day-summary",children:[(0,d.jsxs)("div",{className:"summary-item",children:[(0,d.jsx)("div",{className:"summary-icon",children:"\ud83d\udcb0"}),(0,d.jsxs)("div",{className:"summary-details",children:[(0,d.jsx)("div",{className:"summary-title",children:"\ucd1d \ub9e4\ucd9c"}),(0,d.jsx)("div",{className:"summary-value",children:g(c.day.salesAmount)}),(0,d.jsxs)("div",{className:"summary-subtitle",children:[c.day.orderCount,"\uac74 \uc8fc\ubb38"]})]})]}),(0,d.jsxs)("div",{className:"summary-item",children:[(0,d.jsx)("div",{className:"summary-icon",children:"\ud83d\udcc5"}),(0,d.jsxs)("div",{className:"summary-details",children:[(0,d.jsx)("div",{className:"summary-title",children:"\uc785\uae08 \uc608\uc815"}),(0,d.jsx)("div",{className:"summary-value",children:g(c.day.expectedDeposits)}),(0,d.jsxs)("div",{className:"summary-subtitle",children:[c.day.depositCount,"\uac74 \ub300\uae30"]})]})]})]}),c.day.orders.length>0&&(0,d.jsxs)("div",{className:"orders-section",children:[(0,d.jsx)("h4",{children:"\uc8fc\ubb38 \ub0b4\uc5ed"}),(0,d.jsx)("div",{className:"orders-list",children:c.day.orders.map(n=>{return(0,d.jsxs)("div",{className:"order-item",children:[(0,d.jsxs)("div",{className:"order-info",children:[(0,d.jsxs)("div",{className:"order-id",children:["\uc8fc\ubb38 #",n.id]}),(0,d.jsxs)("div",{className:"order-details",children:[(0,d.jsxs)("span",{className:"payment-type",children:[(e=n.payment_type,s.w.getPaymentTypeIcon(e)),v(n.payment_type)]}),(0,d.jsx)("span",{className:"order-time",children:n.order_date?new Date(n.order_date).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}):""})]})]}),(0,d.jsx)("div",{className:"order-amount",children:g(n.total_amount)}),(0,d.jsx)("div",{className:"order-status ".concat(n.is_deposited?"deposited":"pending"),children:n.is_deposited?"\uc785\uae08\uc644\ub8cc":"\ub300\uae30\uc911"})]},n.id);var e})})]})]})]})}),(0,d.jsx)("style",{children:"\n        .sales-calendar-page {\n          min-height: 100vh;\n          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n          padding: var(--space-6);\n        }\n\n        .calendar-loading {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          min-height: 60vh;\n          color: white;\n        }\n\n        .loading-spinner {\n          width: 40px;\n          height: 40px;\n          border: 3px solid rgba(255, 255, 255, 0.3);\n          border-top: 3px solid white;\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n          margin-bottom: var(--space-4);\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        /* Header */\n        .calendar-header {\n          background: rgba(255, 255, 255, 0.1);\n          backdrop-filter: blur(20px);\n          border: 1px solid rgba(255, 255, 255, 0.2);\n          border-radius: 20px;\n          padding: var(--space-6);\n          margin-bottom: var(--space-6);\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          color: white;\n        }\n\n        .header-content h1 {\n          margin: 0 0 var(--space-2) 0;\n          font-size: 2rem;\n          font-weight: 700;\n        }\n\n        .header-content p {\n          margin: 0;\n          opacity: 0.9;\n          font-size: 1.1rem;\n        }\n\n        .header-actions {\n          display: flex;\n          gap: var(--space-3);\n        }\n\n        .today-btn,\n        .refresh-btn {\n          background: rgba(255, 255, 255, 0.2);\n          border: 1px solid rgba(255, 255, 255, 0.3);\n          border-radius: 12px;\n          color: white;\n          padding: var(--space-3) var(--space-4);\n          cursor: pointer;\n          transition: all 0.3s ease;\n          backdrop-filter: blur(10px);\n          font-weight: 500;\n        }\n\n        .today-btn:hover,\n        .refresh-btn:hover {\n          background: rgba(255, 255, 255, 0.3);\n          transform: translateY(-1px);\n        }\n\n        /* Calendar Navigation */\n        .calendar-nav {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          gap: var(--space-6);\n          margin-bottom: var(--space-4);\n        }\n\n        .nav-btn {\n          background: rgba(255, 255, 255, 0.1);\n          border: 1px solid rgba(255, 255, 255, 0.2);\n          border-radius: 12px;\n          color: white;\n          padding: var(--space-3) var(--space-5);\n          cursor: pointer;\n          transition: all 0.3s ease;\n          backdrop-filter: blur(10px);\n          font-weight: 500;\n        }\n\n        .nav-btn:hover {\n          background: rgba(255, 255, 255, 0.2);\n          transform: translateY(-1px);\n        }\n\n        .current-month {\n          color: white;\n          font-size: 1.5rem;\n          font-weight: 700;\n          margin: 0;\n          text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n        }\n\n        /* Legend */\n        .calendar-legend {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          gap: var(--space-6);\n          margin-bottom: var(--space-6);\n          color: white;\n          font-size: 0.9rem;\n        }\n\n        .legend-item {\n          display: flex;\n          align-items: center;\n          gap: var(--space-2);\n        }\n\n        .legend-color {\n          width: 16px;\n          height: 16px;\n          border-radius: 4px;\n        }\n\n        .legend-color.sales {\n          background: linear-gradient(135deg, #10b981, #059669);\n        }\n\n        .legend-color.deposit {\n          background: linear-gradient(135deg, #f59e0b, #d97706);\n        }\n\n        .legend-note {\n          opacity: 0.8;\n          font-style: italic;\n        }\n\n        /* Calendar Container */\n        .calendar-container {\n          background: rgba(255, 255, 255, 0.95);\n          backdrop-filter: blur(20px);\n          border-radius: 20px;\n          padding: var(--space-6);\n          border: 1px solid rgba(255, 255, 255, 0.3);\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n        }\n\n        .calendar-grid {\n          display: grid;\n          grid-template-columns: repeat(7, 1fr);\n          gap: 1px;\n          background: var(--gray-200);\n          border-radius: 12px;\n          overflow: hidden;\n        }\n\n        .weekday-header {\n          background: var(--gray-100);\n          padding: var(--space-3);\n          text-align: center;\n          font-weight: 600;\n          color: var(--gray-600);\n          font-size: 0.875rem;\n        }\n\n        .calendar-day {\n          background: white;\n          min-height: 120px;\n          padding: var(--space-2);\n          display: flex;\n          flex-direction: column;\n          position: relative;\n          transition: all 0.2s ease;\n        }\n\n        .calendar-day.other-month {\n          background: var(--gray-50);\n          opacity: 0.5;\n        }\n\n        .calendar-day.today {\n          background: linear-gradient(135deg, #dbeafe, #bfdbfe);\n          border: 2px solid var(--primary-500);\n        }\n\n        .calendar-day.has-data {\n          cursor: pointer;\n        }\n\n        .calendar-day.has-data:hover {\n          transform: scale(1.02);\n          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\n          z-index: 1;\n        }\n\n        .day-number {\n          font-weight: 600;\n          color: var(--gray-900);\n          margin-bottom: var(--space-2);\n        }\n\n        .calendar-day.today .day-number {\n          color: var(--primary-700);\n          font-weight: 700;\n        }\n\n        .day-content {\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n          gap: var(--space-1);\n        }\n\n        .sales-info,\n        .deposit-info {\n          padding: var(--space-1);\n          border-radius: 6px;\n          font-size: 0.75rem;\n        }\n\n        .sales-info {\n          background: linear-gradient(135deg, #dcfdf7, #a7f3d0);\n          border: 1px solid #6ee7b7;\n        }\n\n        .deposit-info {\n          background: linear-gradient(135deg, #fef3c7, #fde68a);\n          border: 1px solid #fbbf24;\n        }\n\n        .amount {\n          font-weight: 600;\n          margin-bottom: 2px;\n        }\n\n        .amount.sales {\n          color: var(--success-700);\n        }\n\n        .amount.deposit {\n          color: var(--warning-700);\n        }\n\n        .count {\n          font-size: 0.65rem;\n          opacity: 0.8;\n        }\n\n        /* Modal */\n        .modal-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.5);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 1000;\n          backdrop-filter: blur(4px);\n        }\n\n        .modal-content {\n          background: white;\n          border-radius: 20px;\n          width: 90%;\n          max-width: 600px;\n          max-height: 80vh;\n          overflow: hidden;\n          box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);\n        }\n\n        .modal-header {\n          background: linear-gradient(135deg, var(--primary-500), var(--primary-600));\n          color: white;\n          padding: var(--space-6);\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n\n        .modal-header h3 {\n          margin: 0;\n          font-size: 1.25rem;\n          font-weight: 600;\n        }\n\n        .close-modal-btn {\n          background: none;\n          border: none;\n          color: white;\n          font-size: 1.25rem;\n          cursor: pointer;\n          padding: var(--space-2);\n          border-radius: 6px;\n          transition: background 0.2s ease;\n        }\n\n        .close-modal-btn:hover {\n          background: rgba(255, 255, 255, 0.2);\n        }\n\n        .modal-body {\n          padding: var(--space-6);\n          overflow-y: auto;\n          max-height: calc(80vh - 120px);\n        }\n\n        /* Day Summary */\n        .day-summary {\n          display: grid;\n          grid-template-columns: repeat(2, 1fr);\n          gap: var(--space-4);\n          margin-bottom: var(--space-6);\n        }\n\n        .summary-item {\n          background: var(--gray-50);\n          border-radius: 16px;\n          padding: var(--space-5);\n          display: flex;\n          align-items: center;\n          gap: var(--space-4);\n        }\n\n        .summary-icon {\n          font-size: 2rem;\n          width: 60px;\n          height: 60px;\n          border-radius: 50%;\n          background: linear-gradient(135deg, var(--primary-100), var(--primary-200));\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .summary-title {\n          font-size: 0.875rem;\n          color: var(--gray-600);\n          margin-bottom: var(--space-1);\n        }\n\n        .summary-value {\n          font-size: 1.25rem;\n          font-weight: 700;\n          color: var(--gray-900);\n          margin-bottom: var(--space-1);\n        }\n\n        .summary-subtitle {\n          font-size: 0.75rem;\n          color: var(--gray-500);\n        }\n\n        /* Orders Section */\n        .orders-section h4 {\n          margin: 0 0 var(--space-4) 0;\n          color: var(--gray-900);\n          font-size: 1.125rem;\n          font-weight: 600;\n        }\n\n        .orders-list {\n          display: flex;\n          flex-direction: column;\n          gap: var(--space-3);\n        }\n\n        .order-item {\n          background: white;\n          border: 2px solid var(--gray-200);\n          border-radius: 12px;\n          padding: var(--space-4);\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          transition: all 0.2s ease;\n        }\n\n        .order-item:hover {\n          border-color: var(--primary-300);\n          transform: translateY(-1px);\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n        }\n\n        .order-info {\n          flex: 1;\n        }\n\n        .order-id {\n          font-weight: 600;\n          color: var(--gray-900);\n          margin-bottom: var(--space-1);\n        }\n\n        .order-details {\n          display: flex;\n          gap: var(--space-3);\n          font-size: 0.875rem;\n          color: var(--gray-600);\n        }\n\n        .payment-type {\n          display: flex;\n          align-items: center;\n          gap: var(--space-1);\n        }\n\n        .order-amount {\n          font-weight: 700;\n          color: var(--gray-900);\n          margin-right: var(--space-4);\n        }\n\n        .order-status {\n          padding: var(--space-1) var(--space-3);\n          border-radius: var(--radius-sm);\n          font-size: 0.75rem;\n          font-weight: 600;\n        }\n\n        .order-status.deposited {\n          background: var(--success-100);\n          color: var(--success-700);\n        }\n\n        .order-status.pending {\n          background: var(--warning-100);\n          color: var(--warning-700);\n        }\n\n        /* Responsive Design */\n        @media (max-width: 768px) {\n          .sales-calendar-page {\n            padding: var(--space-4);\n          }\n\n          .calendar-header {\n            flex-direction: column;\n            gap: var(--space-4);\n            text-align: center;\n          }\n\n          .header-content h1 {\n            font-size: 1.5rem;\n          }\n\n          .calendar-nav {\n            gap: var(--space-4);\n          }\n\n          .current-month {\n            font-size: 1.25rem;\n          }\n\n          .calendar-legend {\n            flex-direction: column;\n            gap: var(--space-2);\n          }\n\n          .calendar-day {\n            min-height: 80px;\n            padding: var(--space-1);\n          }\n\n          .day-content {\n            gap: 2px;\n          }\n\n          .sales-info,\n          .deposit-info {\n            padding: 2px;\n            font-size: 0.65rem;\n          }\n\n          .modal-content {\n            width: 95%;\n            margin: var(--space-4);\n          }\n\n          .day-summary {\n            grid-template-columns: 1fr;\n          }\n\n          .order-item {\n            flex-direction: column;\n            align-items: stretch;\n            gap: var(--space-2);\n          }\n\n          .order-details {\n            justify-content: space-between;\n          }\n        }\n      "})]})}}}]);
//# sourceMappingURL=220.0602b3d5.chunk.js.map